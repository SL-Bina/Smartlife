# Nginx konfiqurasiyası - /etc/nginx/sites-available/front.smartlife.az
# Bu faylı /etc/nginx/sites-enabled/ qovluğuna symlink edin:
# ln -s /etc/nginx/sites-available/front.smartlife.az /etc/nginx/sites-enabled/
# Sonra: nginx -t && systemctl reload nginx

server {
    listen 80;
    server_name front.smartlife.az;

    root /home/frontend/design/Smartlife;
    index index.html;

    # Log faylları
    access_log /var/log/nginx/front.smartlife.az.access.log;
    error_log /var/log/nginx/front.smartlife.az.error.log;

    # Maksimum fayl ölçüsü
    client_max_body_size 10M;

    # React Router üçün SPA routes - bütün route-lar index.html-ə yönləndirilir
    location / {
        try_files $uri $uri/ /index.html;
    }

    # Statik fayllar üçün cache control (assets, img, və s.)
    location /assets/ {
        try_files $uri =404;
        expires 1y;
        add_header Cache-Control "public, immutable";
        access_log off;
    }

    # İmages üçün cache
    location /img/ {
        try_files $uri =404;
        expires 30d;
        add_header Cache-Control "public";
        access_log off;
    }

    # Favicon və digər statik fayllar
    location ~* \.(?:ico|css|js|gif|jpe?g|png|woff2?|eot|ttf|svg|webp)$ {
        try_files $uri =404;
        expires 1y;
        add_header Cache-Control "public, immutable";
        access_log off;
    }

    # Gzip compression
    gzip on;
    gzip_vary on;
    gzip_min_length 256;
    gzip_proxied any;
    gzip_comp_level 6;
    gzip_types
        text/plain
        text/css
        text/xml
        text/javascript
        application/json
        application/javascript
        application/xml+rss
        application/atom+xml
        image/svg+xml;
}

