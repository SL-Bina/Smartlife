@tailwind base;
@tailwind components;
@tailwind utilities;

/* Navbar Light Mode Fix - Force text colors when navbar is white */
.navbar-light-mode,
.navbar-light-mode *,
.navbar-light-mode button,
.navbar-light-mode span,
.navbar-light-mode div,
.navbar-light-mode h1,
.navbar-light-mode h2,
.navbar-light-mode h3,
.navbar-light-mode h4,
.navbar-light-mode h5,
.navbar-light-mode h6,
.navbar-light-mode p,
.navbar-light-mode a,
.navbar-light-mode svg,
.navbar-light-mode [class*="text-"],
.navbar-light-mode [class*="Typography"],
nav.navbar-light-mode,
nav.navbar-light-mode *,
nav.navbar-light-mode button,
nav.navbar-light-mode span,
nav.navbar-light-mode div,
nav.navbar-light-mode h1,
nav.navbar-light-mode h2,
nav.navbar-light-mode h3,
nav.navbar-light-mode h4,
nav.navbar-light-mode h5,
nav.navbar-light-mode h6,
nav.navbar-light-mode p,
nav.navbar-light-mode a,
nav.navbar-light-mode svg {
  color: #111827 !important;
}

/* Override Material Tailwind default colors */
.navbar-light-mode [class*="text-blue-gray"],
.navbar-light-mode [class*="text-gray"],
nav.navbar-light-mode [class*="text-blue-gray"],
nav.navbar-light-mode [class*="text-gray"] {
  color: #111827 !important;
}

/* Dark mode navbar - ensure white text */
html.dark .navbar-light-mode,
html.dark .navbar-light-mode *,
html.dark .navbar-light-mode button,
html.dark .navbar-light-mode span,
html.dark .navbar-light-mode div,
html.dark .navbar-light-mode h1,
html.dark .navbar-light-mode h2,
html.dark .navbar-light-mode h3,
html.dark .navbar-light-mode h4,
html.dark .navbar-light-mode h5,
html.dark .navbar-light-mode h6,
html.dark .navbar-light-mode p,
html.dark .navbar-light-mode a,
html.dark .navbar-light-mode svg,
html.dark nav.navbar-light-mode,
html.dark nav.navbar-light-mode *,
html.dark nav.navbar-light-mode button,
html.dark nav.navbar-light-mode span,
html.dark nav.navbar-light-mode div,
html.dark nav.navbar-light-mode h1,
html.dark nav.navbar-light-mode h2,
html.dark nav.navbar-light-mode h3,
html.dark nav.navbar-light-mode h4,
html.dark nav.navbar-light-mode h5,
html.dark nav.navbar-light-mode h6,
html.dark nav.navbar-light-mode p,
html.dark nav.navbar-light-mode a,
html.dark nav.navbar-light-mode svg {
  color: #ffffff !important;
}

/* Leaflet + Tailwind fix */
.leaflet-container {
  height: 100% !important;
  width: 100% !important;
  z-index: 0 !important;
  background-color: #f3f4f6 !important;
  font-family: inherit !important;
  position: relative !important;
}

.leaflet-tile-container {
  position: absolute !important;
  left: 0 !important;
  top: 0 !important;
  width: 100% !important;
  height: 100% !important;
  z-index: 200 !important;
}

.leaflet-tile-container img {
  max-width: none !important;
  max-height: none !important;
  width: 256px !important;
  height: 256px !important;
  display: block !important;
  position: absolute !important;
  opacity: 1 !important;
  visibility: visible !important;
  border: none !important;
  margin: 0 !important;
  padding: 0 !important;
}

.leaflet-tile {
  width: 256px !important;
  height: 256px !important;
  max-width: none !important;
  max-height: none !important;
  display: block !important;
  position: absolute !important;
  opacity: 1 !important;
  visibility: visible !important;
}

.leaflet-pane {
  z-index: 400 !important;
}

.leaflet-tile-pane {
  z-index: 200 !important;
}

.leaflet-tile-pane img {
  opacity: 1 !important;
  visibility: visible !important;
  display: block !important;
  position: absolute !important;
}

.leaflet-overlay-pane {
  z-index: 400 !important;
}

.leaflet-shadow-pane {
  z-index: 500 !important;
}

.leaflet-marker-pane {
  z-index: 600 !important;
}

.leaflet-tooltip-pane {
  z-index: 650 !important;
}

.leaflet-popup-pane {
  z-index: 700 !important;
}

.leaflet-map-pane canvas {
  z-index: 100 !important;
}

.leaflet-map-pane svg {
  z-index: 200 !important;
}

.leaflet-control {
  z-index: 800 !important;
}

/* Fix for Tailwind reset affecting Leaflet */
.leaflet-container * {
  box-sizing: border-box !important;
}

.leaflet-container img {
  border: none !important;
  max-width: none !important;
  max-height: none !important;
}


@layer base {
  :root {
    --bg-primary: #f8f9fa;
    --text-primary: #1a202c;
  }
  
  .dark {
    --bg-primary: #111827;
    --text-primary: #f9fafb;
  }
  
  body {
    @apply bg-blue-gray-50/50 dark:bg-gray-900;
    color: var(--text-primary);
  }
}

@layer utilities {
  .perspective-1000 {
    perspective: 1000px;
  }
  
  /* Custom scrollbar styles */
  .scrollbar-thin::-webkit-scrollbar {
    width: 6px;
  }
  
  .scrollbar-thin::-webkit-scrollbar-track {
    background: transparent;
  }
  
  .scrollbar-thin::-webkit-scrollbar-thumb {
    background-color: #9ca3af;
    border-radius: 3px;
  }
  
  .scrollbar-thin::-webkit-scrollbar-thumb:hover {
    background-color: #6b7280;
  }
  
  .dark .scrollbar-thin::-webkit-scrollbar-thumb {
    background-color: #4b5563;
  }
  
  .dark .scrollbar-thin::-webkit-scrollbar-thumb:hover {
    background-color: #6b7280;
  }
  
  /* Firefox scrollbar */
  .scrollbar-thin {
    scrollbar-width: thin;
    scrollbar-color: #9ca3af transparent;
  }
  
  .dark .scrollbar-thin {
    scrollbar-color: #4b5563 transparent;
  }

  /* Custom Sidenav Scrollbar - Modern Design */
  .custom-sidenav-scrollbar::-webkit-scrollbar {
    width: 8px;
  }
  
  .custom-sidenav-scrollbar::-webkit-scrollbar-track {
    background: transparent;
    margin: 8px 0;
    border-radius: 10px;
  }
  
  .custom-sidenav-scrollbar::-webkit-scrollbar-thumb {
    background: linear-gradient(180deg, #cbd5e1 0%, #94a3b8 100%);
    border-radius: 10px;
    border: 2px solid transparent;
    background-clip: padding-box;
    transition: all 0.3s ease;
  }
  
  .custom-sidenav-scrollbar::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(180deg, #94a3b8 0%, #64748b 100%);
    background-clip: padding-box;
  }
  
  .custom-sidenav-scrollbar::-webkit-scrollbar-thumb:active {
    background: linear-gradient(180deg, #64748b 0%, #475569 100%);
    background-clip: padding-box;
  }
  
  /* Dark mode scrollbar */
  .dark .custom-sidenav-scrollbar::-webkit-scrollbar-thumb {
    background: linear-gradient(180deg, #4b5563 0%, #374151 100%);
    background-clip: padding-box;
  }
  
  .dark .custom-sidenav-scrollbar::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(180deg, #374151 0%, #1f2937 100%);
    background-clip: padding-box;
  }
  
  .dark .custom-sidenav-scrollbar::-webkit-scrollbar-thumb:active {
    background: linear-gradient(180deg, #1f2937 0%, #111827 100%);
    background-clip: padding-box;
  }
  
  /* Firefox scrollbar for sidenav */
  .custom-sidenav-scrollbar {
    scrollbar-width: thin;
    scrollbar-color: #94a3b8 transparent;
  }
  
  .dark .custom-sidenav-scrollbar {
    scrollbar-color: #4b5563 transparent;
  }
}

/* Optimize Dialog animations for better performance */
@layer base {
  .dark .apexcharts-text {
    fill: #E0E0E0 !important;
  }
}

/* Global Dialog z-index - must be above sidebar (1000) */
/* Material Tailwind Dialog uses React Portal, so we target body children */
/* Target all possible portal containers and dialogs - highest priority */
/* This must be outside @layer to have highest specificity */
body > div[class*="portal"],
body > div[id*="portal"],
body > div[role="dialog"],
body > div[class*="Dialog"],
body > div[class*="dialog"],
body > div[class*="fixed"][class*="inset-0"],
body > div[class*="fixed"][class*="inset"],
body > div[style*="position: fixed"][style*="inset"],
/* Direct body children that are fixed and might be dialogs */
body > div[style*="position: fixed"],
body > div[style*="z-index"],
/* Dialog elements */
div[role="dialog"],
div[class*="Dialog-root"],
div[class*="Dialog-container"],
/* Material Tailwind specific classes */
div[class*="material-tailwind"][class*="Dialog"],
div[class*="mt-dialog"],
/* Any fixed element that might be a dialog container */
div[style*="z-index"][style*="position: fixed"],
/* Material Tailwind Dialog wrapper - most common case */
body > div:has(> div[role="dialog"]),
body > div:has([role="dialog"]),
/* All body direct children that contain dialogs */
body > div > div[role="dialog"],
body > div[style*="position: fixed"] {
  z-index: 999999 !important;
}

/* Dialog backdrop - below dialog but above sidebar */
body > div[class*="portal"] > div[class*="backdrop"],
body > div[id*="portal"] > div[class*="backdrop"],
body > div[role="dialog"] > div[class*="backdrop"],
body > div[class*="Dialog"] > div[class*="backdrop"],
body > div[class*="dialog"] > div[class*="backdrop"],
body > div[class*="fixed"] > div[class*="backdrop"],
div[role="dialog"] > div[class*="backdrop"],
div[role="dialog"] ~ div[class*="backdrop"],
div[role="dialog"] + div[class*="backdrop"],
[class*="backdrop"],
/* Material Tailwind backdrop */
div[class*="material-tailwind"] [class*="backdrop"],
div[class*="mt-dialog"] [class*="backdrop"],
/* Any backdrop element */
div[class*="fixed"][class*="inset-0"][class*="backdrop"],
div[class*="fixed"][class*="inset"][class*="backdrop"] {
  z-index: 999998 !important;
}

/* Disable Material Tailwind Dialog animations completely for better performance */
@layer components {
  /* Set high z-index for all dialogs to appear above sidebar */
  div[role="dialog"],
  [class*="dialog-root"],
  [class*="dialog-container"],
  [class*="MuiDialog-root"],
  [class*="MuiDialog"],
  div[class*="Dialog"],
  div[class*="dialog"] {
    z-index: 999999 !important;
    transition: none !important;
    animation: none !important;
    -webkit-transition: none !important;
    -moz-transition: none !important;
    -o-transition: none !important;
  }
  
  /* Dialog backdrop - high z-index */
  [class*="backdrop"],
  [class*="dialog-backdrop"],
  [class*="MuiBackdrop-root"],
  div[class*="Backdrop"],
  div[class*="backdrop"] {
    z-index: 999998 !important;
  }
  
  /* Dialog backdrop - instant */
  [class*="backdrop"],
  [class*="dialog-backdrop"],
  [class*="MuiBackdrop-root"],
  div[class*="Backdrop"],
  div[class*="backdrop"] {
    transition: opacity 0ms !important;
    animation: none !important;
    -webkit-transition: opacity 0ms !important;
    -moz-transition: opacity 0ms !important;
    -o-transition: opacity 0ms !important;
  }
  
  /* Dialog content - instant, no transform animations */
  [class*="dialog-content"],
  [class*="dialog-paper"],
  [class*="MuiDialog-paper"],
  [class*="MuiPaper-root"],
  [class*="dialog-body"],
  [class*="dialog-header"],
  [class*="dialog-footer"],
  div[class*="DialogContent"],
  div[class*="DialogPaper"] {
    transition: none !important;
    animation: none !important;
    transform: none !important;
    -webkit-transition: none !important;
    -moz-transition: none !important;
    -o-transition: none !important;
    -webkit-transform: none !important;
    -moz-transform: none !important;
    -o-transform: none !important;
  }
  
  /* Remove all scale, translate, and rotation animations */
  [class*="dialog"] *,
  div[role="dialog"] * {
    transition: none !important;
    animation: none !important;
    -webkit-transition: none !important;
    -moz-transition: none !important;
    -o-transition: none !important;
  }
}

/* Global override for Material Tailwind Dialog - disable all animations */
div[role="dialog"],
[class*="dialog-root"],
[class*="MuiDialog-root"],
div[class*="Dialog"],
div[class*="dialog"] {
  transition: none !important;
  animation: none !important;
}

[class*="dialog-content"],
[class*="dialog-paper"],
[class*="MuiDialog-paper"],
div[class*="DialogContent"],
div[class*="DialogPaper"] {
  transition: none !important;
  animation: none !important;
  transform: none !important;
}

[class*="backdrop"],
[class*="MuiBackdrop-root"],
div[class*="Backdrop"],
div[class*="backdrop"] {
  transition: opacity 0ms !important;
  animation: none !important;
}

/* Force disable all transitions and animations on any element inside dialog */
div[role="dialog"] *,
[class*="dialog"] *,
[class*="Dialog"] * {
  transition: none !important;
  animation: none !important;
  transform: none !important;
}

/* Material Tailwind specific classes */
.material-tailwind-dialog,
.material-tailwind-dialog-content,
.material-tailwind-dialog-paper {
  transition: none !important;
  animation: none !important;
  transform: none !important;
}